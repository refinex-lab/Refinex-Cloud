@font-face {
  font-family: "AlibabaSans";
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url("//mdn.alipayobjects.com/huamei_iwk9zp/afts/file/A*1GSgSYDD_aIAAAAAQsAAAAgAegCCAQ/AlibabaSans-Light.woff2")
    format("woff2");
}
@font-face {
  font-family: "AlibabaSans";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("//mdn.alipayobjects.com/huamei_iwk9zp/afts/file/A*2zEUQqnPNesAAAAAQtAAAAgAegCCAQ/AlibabaSans-Regular.woff2")
    format("woff2");
}
@font-face {
  font-family: "AlibabaSans";
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url("//mdn.alipayobjects.com/huamei_iwk9zp/afts/file/A*E_cxRbMlZqUAAAAAQuAAAAgAegCCAQ/AlibabaSans-Medium.woff2")
    format("woff2");
}
@font-face {
  font-family: "AlibabaSans";
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url("//mdn.alipayobjects.com/huamei_iwk9zp/afts/file/A*E_cxRbMlZqUAAAAAQuAAAAgAegCCAQ/AlibabaSans-Bold.woff2")
    format("woff2");
}
@font-face {
  font-family: "AlibabaSans";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("//mdn.alipayobjects.com/huamei_iwk9zp/afts/file/A*E_cxRbMlZqUAAAAAQuAAAAgAegCCAQ/AlibabaSans-Heavy.woff2")
    format("woff2");
}

html,
body,
#root {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family:
    AlibabaSans, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans',
    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}

// ==================== 主题切换过渡动画 ====================
// 参考业界优秀实践：GitHub、VS Code、Ant Design、macOS
// 支持：View Transitions API（现代浏览器）+ CSS 过渡（兼容方案）

// CSS 变量：允许动态配置动画参数
:root {
  --theme-transition-duration: 400ms;
  --theme-transition-easing: cubic-bezier(0.4, 0, 0.2, 1);
}

// ========== 1. View Transitions API（Chrome 111+, Edge 111+）==========
@supports (view-transition-name: root) {
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: var(--theme-transition-duration);
    animation-timing-function: var(--theme-transition-easing);
    mix-blend-mode: normal;
  }

  // === fade 效果：仅淡入淡出，无缩放 ===
  html[data-transition-effect='fade'] {
    ::view-transition-old(root) {
      animation-name: theme-fade-out-only;
    }

    ::view-transition-new(root) {
      animation-name: theme-fade-in-only;
    }
  }

  // === scale 效果：淡入淡出 + 缩放（默认）===
  html[data-transition-effect='scale'] {
    ::view-transition-old(root) {
      animation-name: theme-fade-out-scale;
    }

    ::view-transition-new(root) {
      animation-name: theme-fade-in-scale;
    }
  }

  // === slide 效果：淡入淡出 + 滑动 ===
  html[data-transition-effect='slide'] {
    ::view-transition-old(root) {
      animation-name: theme-fade-out-slide;
    }

    ::view-transition-new(root) {
      animation-name: theme-fade-in-slide;
    }
  }

  // === none 效果：无动画 ===
  html[data-transition-effect='none'] {
    ::view-transition-old(root),
    ::view-transition-new(root) {
      animation: none;
    }
  }

  // ===== 动画关键帧定义 =====

  // fade only: 仅透明度变化
  @keyframes theme-fade-out-only {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes theme-fade-in-only {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  // scale: 透明度 + 缩放（类似 GitHub）
  @keyframes theme-fade-out-scale {
    from {
      opacity: 1;
      transform: scale(1);
    }
    to {
      opacity: 0;
      transform: scale(0.98);
    }
  }

  @keyframes theme-fade-in-scale {
    from {
      opacity: 0;
      transform: scale(1.02);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  // slide: 透明度 + 滑动
  @keyframes theme-fade-out-slide {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-20px);
    }
  }

  @keyframes theme-fade-in-slide {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

// ========== 2. 传统 CSS 过渡（兼容方案：Safari、Firefox、旧版浏览器）==========
html {
  &.theme-transitioning {
    // 为所有元素添加平滑的颜色过渡
    *,
    *::before,
    *::after {
      transition:
        background-color var(--theme-transition-duration) var(--theme-transition-easing),
        color var(--theme-transition-duration) var(--theme-transition-easing),
        border-color var(--theme-transition-duration) var(--theme-transition-easing),
        box-shadow var(--theme-transition-duration) var(--theme-transition-easing),
        fill var(--theme-transition-duration) var(--theme-transition-easing),
        stroke var(--theme-transition-duration) var(--theme-transition-easing) !important;

      // 保留原有的 transform、opacity 等属性的过渡，避免覆盖
      transition-property: background-color, color, border-color, box-shadow, fill, stroke;
    }

    // 淡入淡出效果
    &[data-transition-effect='fade'] {
      animation: theme-body-fade var(--theme-transition-duration) var(--theme-transition-easing);
    }

    // 缩放效果
    &[data-transition-effect='scale'] body {
      animation: theme-body-scale var(--theme-transition-duration) var(--theme-transition-easing);
    }

    // 滑动效果
    &[data-transition-effect='slide'] body {
      animation: theme-body-slide var(--theme-transition-duration) var(--theme-transition-easing);
    }
  }
}

// 传统方式的动画关键帧
@keyframes theme-body-fade {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
  100% {
    opacity: 1;
  }
}

@keyframes theme-body-scale {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.98);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes theme-body-slide {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  50% {
    transform: translateY(-10px);
    opacity: 0.85;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

// ========== 3. 尊重用户系统设置（无障碍）==========
@media (prefers-reduced-motion: reduce) {
  // 如果用户偏好减少动画，禁用所有过渡效果
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none !important;
  }
}

.colorWeak {
  filter: invert(80%);
}

.ant-layout {
  min-height: 100vh;
}
.ant-pro-sider.ant-layout-sider.ant-pro-sider-fixed {
  left: unset;
}

canvas {
  display: block;
}

body {
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

ul,
ol {
  list-style: none;
}

@media (max-width: 768px) {
  .ant-table {
    width: 100%;
    overflow-x: auto;
    &-thead > tr,
    &-tbody > tr {
      > th,
      > td {
        white-space: pre;
        > span {
          display: block;
        }
      }
    }
  }
}

.ant-pro-page-container-children-container {
  // 覆盖默认的 padding-inline
  padding-inline: 20px;
}

// 面包屑样式覆盖
.ant-pro-page-container .ant-pro-page-container-warp-page-header .ant-page-header-breadcrumb {
  padding-block-start: 0;
}
.ant-pro-page-container .ant-pro-page-container-warp-page-header {
  padding-block-end: 6px;
}

// AI 助手入口样式覆盖 - 移除 Pro Layout 默认的左右边距
.ant-pro-layout .ant-pro-sider-extra {
  margin-inline: 0 !important;
}

// 减少面包屑高度，因为没有用到
.ant-page-header-no-children {
  height: 15px;
}

// MDXEditor 工具栏样式覆盖（全局级别，确保优先级）
// 使用最高优先级覆盖 CSS Modules 生成的类名
.mdxeditor [class*='toolbarRoot'],
.mdxeditor [class*='_toolbarRoot_'],
div[class*='_toolbarRoot_'] {
  background-color: #ffffff !important;
  border-bottom: 1px solid #d9d9d9 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

// ==================== 全局滚动条样式 ====================
// 亮色模式滚动条（默认）
::-webkit-scrollbar {
  height: 10px;
  width: 10px;
}

::-webkit-scrollbar-thumb {
  background: #bfbfbf;
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: content-box;

  &:hover {
    background: #8c8c8c;
    background-clip: content-box;
  }
}

::-webkit-scrollbar-track {
  background: #f0f0f0;
  border-radius: 5px;
}

// Firefox 滚动条
* {
  scrollbar-width: thin;
  scrollbar-color: #bfbfbf #f0f0f0;
}

// 暗色模式滚动条 - 支持多种暗色模式选择器
html.realDark,
body.realDark,
html[data-theme='dark'],
html[data-prefers-color='dark'] {
  ::-webkit-scrollbar {
    height: 10px;
    width: 10px;
  }

  ::-webkit-scrollbar-thumb {
    background: #434343;
    border-radius: 5px;
    border: 2px solid transparent;
    background-clip: content-box;

    &:hover {
      background: #595959;
      background-clip: content-box;
    }
  }

  ::-webkit-scrollbar-track {
    background: #1a1a1a;
    border-radius: 5px;
  }

  // Firefox 滚动条
  * {
    scrollbar-width: thin;
    scrollbar-color: #434343 #1a1a1a;
  }
}

// 暗色模式下，对所有滚动条元素应用暗色样式（更高优先级）
.realDark {
  ::-webkit-scrollbar {
    height: 10px;
    width: 10px;
  }

  ::-webkit-scrollbar-thumb {
    background: #434343;
    border-radius: 5px;
    border: 2px solid transparent;
    background-clip: content-box;

    &:hover {
      background: #595959;
      background-clip: content-box;
    }
  }

  ::-webkit-scrollbar-track {
    background: #1a1a1a;
    border-radius: 5px;
  }

  // Firefox 滚动条
  * {
    scrollbar-width: thin;
    scrollbar-color: #434343 #1a1a1a;
  }
}
